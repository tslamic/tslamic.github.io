<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Stuff &#8211; Tadej's Blog</title>
<meta name="description" content="Tadej's Blog">




<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Stuff">
<meta property="og:description" content="Tadej's Blog">
<meta property="og:url" content="/page2/index.html">
<meta property="og:site_name" content="Tadej's Blog">





<link rel="canonical" href="/page2/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Tadej's Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
    <button class="dl-trigger">Open Menu</button>
    <ul class="dl-menu">
        <li><a href="/">Home</a></li>
        <li>
            <a href="#">About</a>
            <ul class="dl-submenu">
                <li>
                    <img src="/images/selfie.jpg" alt="Tadej Slamic photo" class="author-photo">
                    <h4>Tadej Slamic</h4>
                    <p>I'm a code monkey from Slovenia, currently living in Dublin. I love code, coffee and traveling.</p>
                </li>
                <li><a href="/about/"><span class="btn btn-inverse">Learn More</span></a></li>
                
                
                
                
                
                <li>
                    <a href="http://linkedin.com/in/tadejslamic"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
                </li>
                
                
                <li>
                    <a href="http://github.com/tslamic"><i class="fa fa-fw fa-github"></i> GitHub</a>
                </li>
                
                
                <li>
                    <a href="http://stackoverflow.com/users/905349/curtisloew"><i class="fa fa-fw fa-stack-exchange"></i> Stack Overflow</a>
                </li>
                
                
                
                
            </ul>
            <!-- /.dl-submenu -->
        </li>
        <li>
            <a href="#">Posts</a>
            <ul class="dl-submenu">
                <li><a href="/posts/">All Posts</a></li>
                <li><a href="/tags/">All Tags</a></li>
            </ul>
        </li>
        <li>
            <a href="#">Projects</a>
            <ul class="dl-submenu">
                <li><a href="https://github.com/tslamic/FancyBackground">FancyBackground</a></li>
                <li><a href="https://github.com/tslamic/Dumpey">Dumpey</a></li>
                <li><a href="https://play.google.com/store/apps/details?id=com.tslamic.luas">Luas</a></li>
            </ul>
        </li>
        <li>
            
        <li>
            <a href="http://linkedin.com/in/tadejslamic"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
        </li>
        
        
        <li>
            <a href="http://github.com/tslamic"><i class="fa fa-fw fa-github"></i> GitHub</a>
        </li>
        
        
        <li>
            <a href="http://stackoverflow.com/users/905349/curtisloew"><i class="fa fa-fw fa-stack-exchange"></i> Stack Overflow</a>
        </li>
        
        </li>
    </ul>
    <!-- /.dl-menu -->
</nav>
<!-- /.dl-menuwrapper -->

<div class="entry-header">
  
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Tadej's Blog</h1>
      <h2>Latest Stuff</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
      <div class="entry-image-index">
        <a href="/view-animations-on-android/" title="View Animations On Android"><img src="/images/abstract-5.jpg" alt="View Animations On Android"></a>
      </div><!-- /.entry-image -->
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2013-10-06T00:00:00-04:00"><a href="/view-animations-on-android/">October 06, 2013</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Tadej Slamic">Tadej Slamic</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~4 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/view-animations-on-android/" rel="bookmark" title="View Animations On Android" itemprop="url">View Animations On Android</a></h1>
    
  </header>
  <div class="entry-content">
    <p>The Android framework provides two animation systems:</p>

<ul>
  <li>Property animation (introduced in Android 3.0)</li>
  <li>View animation</li>
</ul>

<p>While property animation system is more flexible, offers more features and generally has better performance, the view animation system takes less time to setup and requires less code to write. If it accomplishes everything you need to do, there is no need to use the property animation system.</p>

<p>In this post, we’re going to focus on the basics of the latter one.</p>

<p>The view animation system is used to perform <em>tweened</em> animation on views. Tween stands for “in-between” and refers to the creation of successive frames of animation between the first and the last frame.</p>

<p>It can perform a series of simple transformations on a <code>View</code> object, changing:</p>

<ul>
  <li>position</li>
  <li>size</li>
  <li>rotation</li>
  <li>transparency</li>
</ul>

<p>The system lives in the <code>android.view.animation</code> package, with <code>Animation</code>, <code>AnimationSet</code> and <code>Interpolator</code> being the juicy parts.</p>

<p><code>Animation</code> class is responsible for a single animation. If our animation should change e.g. position <em>and</em> transparency, we’d have to use the <code>AnimationSet</code> class, since it represents a group of animations that should be played together.</p>

<p><code>Interpolator</code> defines the rate of change of an animation. We can specify, for example, how fast something is going to fade out or if the animation should be accelerating, decelerating, etc.</p>

<center>
  <figure>
    <a href="http://cogitolearning.co.uk/?p=1078" target="_blank">
      <img src="http://i.imgur.com/xVlimsR.png" />
    </a>
    <figcaption>Rate of change for some interpolators.</figcaption>
  </figure>
</center>

<p>Constructing an <code>Animation</code> is simple:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Animation</span> <span class="n">fadeOut</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">AlphaAnimation</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">fadeOut</span><span class="o">.</span><span class="na">setInterpolator</span><span class="o">(</span><span class="k">new</span> <span class="nf">AccelerateInterpolator</span><span class="o">());</span>
<span class="n">fadeOut</span><span class="o">.</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span></code></pre></div>

<p>Remember the simple transformations we’re able to do: position, size, rotation and transparency? Android provides an implementation for each one, respectively:</p>

<ul>
  <li><code>TranslateAnimation</code></li>
  <li><code>ScaleAnimation</code></li>
  <li><code>RotateAnimation</code></li>
  <li><code>AlphaAnimation</code></li>
</ul>

<p>In our example, we’re using <code>AlphaAnimation</code> which is used for transparency transformations. The arguments, <code>1</code> and <code>0</code>, simply mean we wish the opacity to go from 100% to 0% - we want the view to fade out.</p>

<p>The second line of our example sets the <code>Interpolator</code>. Again, to make things easier for us, the package includes several subclasses specifying various speed curves. We’ve randomly chosen <code>AccelerateInterpolator</code>, which tells a transformation to start slow, then speed up. By default, every Animation uses a <code>LinearInterpolator</code>. Lastly, we set the millisecond duration for our animation to run.</p>

<p>Animations can be defined by either code or XML. Android designates a special folder where XML files should live: <code>res/anim</code>. Let’s create a file called <code>res/anim/fade_out.xml</code>:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;alpha</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">android:interpolator=</span><span class="s">&quot;@interpolator/accelerate_quad&quot;</span> 
    <span class="na">android:fromAlpha=</span><span class="s">&quot;1.0&quot;</span>
    <span class="na">android:toAlpha=</span><span class="s">&quot;0.0&quot;</span>
    <span class="na">android:duration=</span><span class="s">&quot;1000&quot;</span><span class="nt">/&gt;</span></code></pre></div>

<p>To use it, `AnimationUtils class provides a method that constructs the Animation:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Context</span> <span class="n">ctx</span> <span class="o">=</span> <span class="n">getContext</span><span class="o">();</span>
<span class="n">Animation</span> <span class="n">fade</span> <span class="o">=</span> <span class="n">AnimationUtils</span><span class="o">.</span><span class="na">loadAnimation</span><span class="o">(</span><span class="n">ctx</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">anim</span><span class="o">.</span><span class="na">fade_out</span><span class="o">);</span></code></pre></div>

<p>Suppose we wish to - besides fading out - shrink our view. Recall that in order to execute two or more animations at the same time, we have to use <code>AnimationSet</code>. This is as simple as creating an <code>Animation</code> and adding it to the <code>AnimationSet</code>:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// suppose fade is defined as in the code example above</span>

<span class="n">Animation</span> <span class="n">shrink</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ScaleAnimation</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">shrink</span><span class="o">.</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">AnimationSet</span> <span class="n">set</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">AnimationSet</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
<span class="n">set</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">fade</span><span class="o">);</span>
<span class="n">set</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">shrink</span><span class="o">);</span>

<span class="c1">// suppose view variable exist, and points to a View instance</span>
<span class="n">view</span><span class="o">.</span><span class="na">startAnimation</span><span class="o">(</span><span class="n">set</span><span class="o">);</span></code></pre></div>

<p>If you do not wish to run all animations in the set at the same time, you can specifying the <em>start offset</em>. <code>fade</code> will run 1000 milliseconds. In order for <code>shrink</code> to be executed afterwards, it needs to wait 1000 millis:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">shrink</span><span class="o">.</span><span class="na">setStartOffset</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span></code></pre></div>

<p>Converting everything to XML yields:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;set</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;alpha</span>
    <span class="na">android:fromAlpha=</span><span class="s">&quot;1.0&quot;</span>
    <span class="na">android:toAlpha=</span><span class="s">&quot;0.0&quot;</span>
    <span class="na">android:interpolator=</span><span class="s">&quot;@android:interpolator/accelerate_quad&quot;</span>
    <span class="na">android:duration=</span><span class="s">&quot;1000&quot;</span><span class="nt">/&gt;</span>

  <span class="nt">&lt;scale</span>
    <span class="na">android:fromXScale=</span><span class="s">&quot;1.0&quot;</span>
    <span class="na">android:toXScale=</span><span class="s">&quot;0.0&quot;</span>
    <span class="na">android:fromYScale=</span><span class="s">&quot;1.0&quot;</span>
    <span class="na">android:toYScale=</span><span class="s">&quot;0.0&quot;</span>
    <span class="na">android:duration=</span><span class="s">&quot;1000&quot;</span>
    <span class="na">android:startOffset=</span><span class="s">&quot;1000&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/set&gt;</span></code></pre></div>

<p>To conclude this rudimentary introduction to view animation, an interface is worth mentioning: <code>AnimationListener</code>. Suppose we wish to hide our view after an animation completes or just listen to animation events. All we have to do is:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Animation</span> <span class="n">fadeOut</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">AlphaAnimation</span><span class="o">(</span><span class="mi">1</span><span class="n">f</span><span class="o">,</span> <span class="mi">0</span><span class="n">f</span><span class="o">);</span>
<span class="n">fadeOut</span><span class="o">.</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>

<span class="n">fadeOut</span><span class="o">.</span><span class="na">setAnimationListener</span><span class="o">(</span><span class="k">new</span> <span class="n">Animation</span><span class="o">.</span><span class="na">AnimationListener</span><span class="o">()</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onAnimationStart</span><span class="o">(</span><span class="n">Animation</span> <span class="n">animation</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Do something when fadeOut starts</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onAnimationRepeat</span><span class="o">(</span><span class="n">Animation</span> <span class="n">animation</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Do something if fadeOut is repeated</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onAnimationEnd</span><span class="o">(</span><span class="n">Animation</span> <span class="n">animation</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">view</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">INVISIBLE</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">});</span>

<span class="n">view</span><span class="o">.</span><span class="na">startAnimation</span><span class="o">(</span><span class="n">fadeOut</span><span class="o">);</span></code></pre></div>

<p>If you wish to spice things up by browsing through some actual code, I’ve created a simple app showing random View animations. You can find it <a href="https://github.com/tslamic/AndroidExamples/tree/master/SimpleAnimationsExample">here</a>.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
      <div class="entry-image-index">
        <a href="/twos-complement-and-absolute-values/" title="Two's Complement And Absolute Values"><img src="/images/abstract-5.jpg" alt="Two's Complement And Absolute Values"></a>
      </div><!-- /.entry-image -->
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2013-07-21T00:00:00-04:00"><a href="/twos-complement-and-absolute-values/">July 21, 2013</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Tadej Slamic">Tadej Slamic</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~7 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/twos-complement-and-absolute-values/" rel="bookmark" title="Two's Complement And Absolute Values" itemprop="url">Two's Complement And Absolute Values</a></h1>
    
  </header>
  <div class="entry-content">
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<p>If I ask you what the result of <code>Math.abs(-10)</code> is, would you guess it’s <code>10</code>? How about <code>Math.abs(-2147483648)</code>? If you think the answer is <code>2147483648</code>, you’re wrong.</p>

<center>
<figure>
<img src="http://karengately.files.wordpress.com/2011/10/gasp.jpg" />
<figcaption>What!?</figcaption>
</figure>
</center>

<h3 id="how-it-all-starts">How it all starts</h3>

<p>A bit can hold only one of two values, say <code>0</code> and <code>1</code>. An 8-bit value, for example, is 
a combination of 8 bits <em>glued together</em>:</p>
<pre>
001: [0] [0] [0] [0] [0] [0] [0] [0]
002: [0] [0] [0] [0] [0] [0] [0] [1]
003: [0] [0] [0] [0] [0] [0] [1] [0]
004: [0] [0] [0] [0] [0] [0] [1] [1]
// ...
256: [1] [1] [1] [1] [1] [1] [1] [1]
</pre>

<p>There are 256 possible values. Being presented with the table above and no additional information, a natural question arises: <em>what do this combinations of bits represent?</em></p>

<p>Knowing computers operate with binary numbers, a good guess would be this are just binary representations of numbers. Lo and behold, you’ve discovered an <em>unsigned</em> 8-bit integer representation system. Converting to decimal, the values yield:</p>

<pre>
001: [0] [0] [0] [0] [0] [0] [0] [0] = 0
002: [0] [0] [0] [0] [0] [0] [0] [1] = 1
003: [0] [0] [0] [0] [0] [0] [1] [0] = 2
004: [0] [0] [0] [0] [0] [0] [1] [1] = 3
// ...
256: [1] [1] [1] [1] [1] [1] [1] [1] = 255
</pre>

<p>Notice what <em>unsigned</em> means - the values we’ve calculated are all non-negative. Also, we’re only able to represent integers from 0 to 255.</p>

<p>Let’s think of a way to make our system <em>signed</em> - let’s incorporate negative numbers.</p>

<p>We want more or less even number of both, positive and negative numbers, so let’s make a wild guess and choose the first bit to represent the sign: <code>0</code> means the number will be positive, <code>1</code> negative:</p>
<pre>
[0] [0] [0] [0] [0] [0] [0] [0] = +0
[0] [0] [0] [0] [0] [0] [0] [1] = +1
[0] [0] [0] [0] [0] [0] [1] [0] = +2
// ...
[0] [1] [1] [1] [1] [1] [1] [1] = +127
</pre>
<pre>
[1] [0] [0] [0] [0] [0] [0] [0] = -0
[1] [0] [0] [0] [0] [0] [0] [1] = -1
[1] [0] [0] [0] [0] [0] [1] [0] = -2
// ...
[1] [1] [1] [1] [1] [1] [1] [1] = -127
</pre>

<p>Voila! Our very first 8-bit signed integer system. Being very intuitive, this is a well known system called <em>signed magnitude</em>. It was used by some ancient computers.</p>

<center>
  <figure>
    <img src="http://ed-thelen.org/comp-hist/BRL61-0546.jpg" />
    <figcaption>IBM 7090</figcaption>
  </figure>
</center>

<h3 id="enter-twos-complement">Enter Two’s Complement</h3>

<p>Through time, people had come up with a clever way of storing integers, so that common math problems are simple to implement and there are no multiple zero representations.</p>

<blockquote>
For an arbitrary n-bit binary number, to get its opposite representation, first invert the number, then add 1.
</blockquote>

<p>This simple algorithm forms Two’s Complement, the most commonly used signed number representation system in use today. </p>

<p>Let’s do an example: find the opposite value of the binary number <code>00001010</code>:</p>
<pre>
~ 00001010 // invert value
= 11110101 // result of inverted value
+ 00000001 // add 1
= 11110110 // final result
</pre>

<p>Let’s check what the opposite number of <code>11110110</code> is - if the algorithm is well-defined, the result should be <code>00001010</code>:</p>
<pre>
~ 11110110 // invert value
= 00001001 // result of inverted value
+ 00000001 // add 1
= 00001010 // final result
</pre>

<p>Now for a more juicy example. What’s the opposite binary number of <code>00000000</code>?</p>
<pre>
~  00000000 // invert value
=  11111111 // result of inverted value
+  00000001 // add 1
= 100000000 // final result
</pre>

<p>The result is a 9-bit number in an 8-bit number system. This is called an <em>overflow</em> since the value is, well, overflowing the 8-bit size restriction. The overflow is usually discarded, leaving us with the first eight bits from the right, <code>00000000</code>. We just showed that there is exactly one representation of <code>0</code>.</p>

<h3 id="sign">Sign</h3>

<p>In Two’s Complement, the most significant bit represents the sign. <code>0</code> means the number will be positive, <code>1</code> negative. The implication is that with <em>n</em> bits, you can only use <em>(n-1)</em> bits to represent the number, as one bit is reserved to denote the sign. </p>

<p>You may think of <code>01001010</code> as a compound value consisting of <code>0</code> (sign) and <code>1001010</code> (actual binary number). </p>

<h3 id="but-i-cant-think-in-binary">But I can’t think in binary</h3>

<p>Converting a binary value <code>01001010</code> to decimal is simple. Ignoring the most significant bit, we get </p>

<script type="math/tex; mode=display"> 0 * 2^{0} + 1 * 2^{1} + 0 * 2^{2} + 1 * 2^{3} + 1 * 2^{6} = 138 </script>

<p>What about <code>10001010</code>? </p>

<p>This is a negative value, since the most significant bit is <code>1</code>. To get the actual value, we can apply Two’s Complement algorithm, ignoring the first bit: </p>

<pre>
~ 0001010 // invert value
= 1110101 // result of inverted value
+ 0000001 // add 1
= 1110110 // final result
</pre>

<p>Then, </p>

<script type="math/tex; mode=display"> 0 * 2^{0} + 1 * 2^{1} + 1 * 2^{3} + 0 * 2^{4} + 1 * 2^{5} + 1 * 2^{6} + 1 * 2^{7} = 118 </script>

<p>Because the most significant bit is <code>1</code>, the decimal number we calculated is negative. Therefore, <code>10001010 == -118</code>.</p>

<h3 id="what-about-the-bounds">What about the bounds?</h3>

<p>In 8-bit unsigned integer system, we could represent integers from 0 to 255. With 8-bit sign and magnitude, we could represent numbers from -127 to 127. What about Two’s Complement bounds?</p>

<p>Let’s first look at 3-bit two’s complement binary numbers and its decimal values:</p>

<center>
<table style="width:300px; text-align:center">
  <tr>
    <th>Bits</th>
    <th>Values</th>
  </tr>

  <tr>
    <td>000</td>
    <td>0</td>
  </tr>

  <tr>
    <td>001</td>
    <td>1</td>
  </tr>

  <tr>
    <td>010</td>
    <td>2</td>
  </tr>

  <tr style="border-bottom: 2px solid #ccc;">
    <td>011</td>
    <td>3</td>
  </tr>

 <tr>
    <td>100</td>
    <td>-4</td>
  </tr>

  <tr>
    <td>101</td>
    <td>-3</td>
  </tr>
  
  <tr>
    <td>110</td>
    <td>-2</td>
  </tr>
  
  <tr>
    <td>111</td>
    <td>-1</td>
  </tr>
  
</table>
</center>

<p>Since one bit represents the sign, there are only two bits available for binary numbers. The upper bound seems to be 3 or \(2^{2} - 1\). The lower bound is -4 or \(-2^{2}\)</p>

<p>Let’s do the same thing for 4-bit numbers:</p>

<center>
<table style="width:300px; text-align:center">
  <tr>
    <th>Bits</th>
    <th>Values</th>
  </tr>

  <tr>
    <td>0000</td>
    <td>0</td>
  </tr>

  <tr>
    <td>0001</td>
    <td>1</td>
  </tr>

  <tr>
    <td>0010</td>
    <td>2</td>
  </tr>

  <tr>
    <td>0011</td>
    <td>3</td>
  </tr>

 <tr>
    <td>0100</td>
    <td>4</td>
  </tr>
  
  <tr>
    <td>0101</td>
    <td>5</td>
  </tr>
  
  <tr>
    <td>0110</td>
    <td>6</td>
  </tr>

  <tr style="border-bottom: 2px solid #ccc;">
    <td>0111</td>
    <td>7</td>
  </tr>

 <tr>
    <td>1000</td>
    <td>-8</td>
  </tr>

  <tr>
    <td>1001</td>
    <td>-7</td>
  </tr>

  <tr>
    <td>1010</td>
    <td>-6</td>
  </tr>

  <tr>
    <td>1011</td>
    <td>-5</td>
  </tr>

 <tr>
    <td>1100</td>
    <td>-4</td>
  </tr>
  
  <tr>
    <td>1101</td>
    <td>-3</td>
  </tr>
  
  <tr>
    <td>1110</td>
    <td>-2</td>
  </tr>

  <tr>
    <td>1111</td>
    <td>-1</td>
  </tr>
  
</table>
</center>

<p>Again, one bit represents the sign, so there are three bits available for binary numbers. The upper bound seems to be 7 or \(2 ^ {3} - 1\). The lower bound is -8 or \(-2^{3}\)</p>

<p>Notice the bounds pattern for number of bits:</p>

<center>
<table style="width:550px; text-align:center">
  <tr>
    <th>Number of bits</th>
    <th>Lower bound</th>
    <th>Upper bound</th>
  </tr>
  
  <tr>
    <td>3</td>
    <td>-4</td>
    <td>3</td>
  </tr>
  
  <tr>
    <td>4</td>
    <td>-8</td>
    <td>7</td>
  </tr>
  
  <tr>
    <td>5</td>
    <td>-16</td>
    <td>15</td>
  </tr>

  <tr>
    <td>...</td>
    <td>...</td>
    <td>...</td>
  </tr>

 <tr>
    <td>n</td>
    <td>\(-2^{n - 1}\)</td>
    <td>\(2^{n - 1} - 1\)</td>
  </tr>
  
</table>
</center>

<h3 id="the-grand-finale">The grand finale</h3>

<p>Let’s look at one more example. What is the opposite value of binary number <code>100</code>?</p>

<pre>
~ 100 // invert value
= 011 // result of inverted value
+ 001 // add 1
= 100 // final result
</pre>

<p>The opposite value of <code>100</code> is the exact same value. Weird. Let’s do one more. What’s the opposite value of <code>1000</code>?</p>

<pre>
~ 1000 // invert value
= 0111 // result of inverted value
+ 0001 // add 1
= 1000 // final result
</pre>

<p>Again, the opposite value remains the same. Does this hold for any <em>n-bit</em> value, too?</p>

<pre>
~ 1000 ... 00 // invert value
= 0111 ... 11 // result of inverted value
+ 0000 ... 01 // add 1
= 1000 ... 00 // final result
</pre>

<p>Yes, it does. But what are this values? </p>

<center>
<table style="width:500px; text-align:center">
  <tr>
    <th>Number of bits</th>
    <th>Bit value</th>
    <th>Decimal value</th>
  </tr>
  
  <tr>
    <td>3</td>
    <td>100</td>
    <td>-4</td>
  </tr>
  
  <tr>
    <td>4</td>
    <td>1000</td>
    <td>-8</td>
  </tr>
  
  <tr>
    <td>5</td>
    <td>10000</td>
    <td>-16</td>
  </tr>
  
   <tr>
    <td>...</td>
    <td>...</td>
    <td>...</td>
  </tr>

  <tr>
   <td>n</td>
   <td></td>
   <td>\(-2^{n - 1}\)</td> 
  </tr>
  
</table>
</center>

<p>The values are lower bounds. We’ve shown that in Two’s Complement, the opposite value of a lower bound is still the lower bound. </p>

<p>This is relevant because <code>-2147483648 == Integer.MIN_VALUE</code>, a lower bound for <code>int</code> type in Java. We know now the opposite value of a lower bound is still the lower bound, which explains why <code>Math.abs(-2147483648) != 2147483648</code>.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
      <div class="entry-image-index">
        <a href="/java-operators-i-thought-i-knew/" title="Java Operators I Thought I Knew"><img src="/images/abstract-5.jpg" alt="Java Operators I Thought I Knew"></a>
      </div><!-- /.entry-image -->
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2013-05-27T00:00:00-04:00"><a href="/java-operators-i-thought-i-knew/">May 27, 2013</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Tadej Slamic">Tadej Slamic</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~3 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/java-operators-i-thought-i-knew/" rel="bookmark" title="Java Operators I Thought I Knew" itemprop="url">Java Operators I Thought I Knew</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Today, I stumbled upon <a href="http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html">Java Tutorial Operators</a> page. </p>

<p>I glanced the list, wondering if I know what each operator does. As you might have guessed from the title, I failed. Luckily, I failed at only two operators. </p>

<h3 id="the-modulo-operator-">The modulo operator %</h3>

<p>While mostly defined in the same fashion, implementations of <em>modulo</em> or <em>reminder</em> operator differ when it comes to the sign of a result. For example, a modulo operator in Python might yield a different result than a modulo operator in Java, using the exact same data. Try it out for yourself, evaluate the expression <code>-1 % 2</code> for instance.</p>

<p>Why?</p>

<p>It boils down to the decision language designers made when defining the operator. Recall that in an expression <code>a % b = c</code>,
<code>a</code> is said to be the <em>dividend</em> and <code>b</code> the <em>divisor</em>. Some decided <code>c</code> should have the same sign as the dividend, others divisor. Java chose dividend, Python divisor.</p>

<p>Missing this fact could lead to some “fun” late night debugging sessions. Consider the following example:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="cm">/*</span>
<span class="cm"> * Returns true if value is odd, false otherwise.</span>
<span class="cm"> */</span>
<span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isOdd</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="o">(</span><span class="n">value</span> <span class="o">%</span> <span class="mi">2</span><span class="o">)</span> <span class="o">==</span> <span class="mi">1</span><span class="o">;</span>
<span class="o">}</span></code></pre></div>

<p>It works wonderful with a positive argument. But since the definition of an odd number is quite natural for any negative integer too, does <code>isOdd(-1)</code> produce a correct result? </p>

<p>Java uses the dividend when determining the sign of a modulo operation. Therefore, if the argument we pass to <code>isOdd</code> is negative, the modulo operation yields a negative result. In our case <code>-1 % 2 == -1</code>, and <code>isOdd(-1) == false</code>. The result is not what one would expect.</p>

<p>A quick fix could apply absolute value to a dividend. A better solution, albeit a bit cryptic, would be to just check the last bit of a number and avoid the modulo operator altogether:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="cm">/*</span>
<span class="cm"> * Returns true if value is odd, false otherwise.</span>
<span class="cm"> */</span>
<span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isOdd</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="o">(</span><span class="n">value</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">==</span> <span class="mi">1</span><span class="o">;</span>
<span class="o">}</span></code></pre></div>

<h3 id="the-unsigned-right-shift-">The unsigned right shift <code>&gt;&gt;&gt;</code></h3>

<p>The second operator I was having trouble with was <code>&gt;&gt;&gt;</code>. I couldn’t tell the difference with <code>&gt;&gt;</code> operator, so I had to check the definition: <code>&gt;&gt;&gt;</code>is an <em>unsigned</em> right shift whereas <code>&gt;&gt;</code> is <em>signed</em>. </p>

<p>Confused? Read on.</p>

<center>
<figure>
  <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/7/76/Most_significant_bit.svg/300px-Most_significant_bit.svg.png" alt="Most Significant Bit" />
  <figcaption>The most significant bit is highlighted.</figcaption>
</figure>
</center>

<p><code>&gt;&gt;</code> operator uses the most-significant bit value when shifting a bit pattern, whereas <code>&gt;&gt;&gt;</code> <em>always</em> uses <code>0</code>.</p>

<p>Suppose we’re operating with 4-bit two’s complement numbers. Take a binary number, e.g. <code>0001</code>. The most significant bit is <code>0</code>. Performing a shift, say <code>0001 &gt;&gt; 1</code>, the value you’ll be shifting with is <code>0</code>.</p>

<p>Now consider the binary number <code>1001</code>. The most significant bit in this case is <code>1</code>, so the value you’ll be shifting with is <code>1</code>.</p>

<pre>
0001 &gt;&gt; 1 == 0000
1001 &gt;&gt; 1 == 1100
</pre>

<p>Regardless of the most significant bit value, an unsigned right shift operator <code>&gt;&gt;&gt;</code> always uses <code>0</code> as the shifting value. <code>0001</code> will be shifted with <code>0</code> as before, but so will <code>1001</code>:</p>

<pre>
0001 &gt;&gt;&gt; 1 = 0000
1001 &gt;&gt;&gt; 1 = 0100
</pre>

<p>You may notice there is no unsigned left shift operator. Any nontrivial <code>&lt;&lt;</code> shift will actually move the significant bit out of the picture: <code>1001 &lt;&lt; 1 == 0010</code>. Shifting by 1 to the left will transform -7 to 2, changing signs along the way. Therefore, the <code>&lt;&lt;</code> operator itself is already <em>unsigned</em>.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->


<div class="pagination">
  
    
      <a href="" class="btn">Previous</a>
    
  
  <ul class="inline-list">
    <li>
      
        <a href="">1</a>
      
    </li>
    
      <li>
        
          <span class="current-page">2</span>
        
      </li>
    
  </ul>
  
    Next
  
</div><!-- /.pagination -->
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2015 Tadej Slamic. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/" rel="notfollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44812127-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>


          

</body>
</html>