<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <link rel="alternate" type="application/rss+xml" title="Tadej's Blog" href="atom.xml">
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      View Animations On Android &middot; Tadej's Blog
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  
   <!-- Analytics -->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44812127-1', 'tslamic.github.io');
  ga('send', 'pageview');
  </script>
</head>

  <body>

    <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>
    
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/archive/">Archive</a>
        
      
    
      
    
      
        
      
    

    <a class="sidebar-nav-item" href="https://github.com/tslamic/">GitHub</a>
    <a class="sidebar-nav-item" href="http://ie.linkedin.com/in/tadejslamic/">LinkedIn</a>
  </nav>
	    
  <div class="sidebar-item">
    <p>
      &copy; 2014 Tadej Slamic. All rights reserved.
    </p>
  </div>

</div>

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Tadej's Blog</a>
            <small>Code, Life and Coffee.</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        

<!-- Social Stuff -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4d80e9b26f25217a"></script>
<script type="text/javascript">
  addthis.layers({
    'theme' : 'transparent',
    'share' : {
      'position' : 'right',
      'numPreferredServices' : 4
    }   
  });
</script>

<div class="post">
  <h1 class="post-title">View Animations On Android</h1>
  <span class="post-date">06 Oct 2013</span>
  <p>The Android framework provides two animation systems:
<ul>
    <li>Property animation (introduced in Android 3.0)</li>
    <li>View animation</li>
</ul>
While property animation system is more flexible, offers more features and generally has better performance, the view animation system takes less time to setup and requires less code to write. If it accomplishes everything you need to do, there is no need to use the property animation system.</p>

<p>In this post, we&#39;re going to focus on the basics of the latter one.</p>

<p>The view animation system is used to perform <em>tweened</em> animation on views. Tween stands for &quot;in-between&quot; and refers to the creation of successive frames of animation between the first and the last frame.</p>

<p>It can perform a series of simple transformations on a <code>View</code> object, changing:
<ul>
    <li>position</li>
    <li>size</li>
    <li>rotation</li>
    <li>transparency</li>
</ul>
The system lives in the <code>android.view.animation</code> package, with <code>Animation</code>, <code>AnimationSet</code> and <code>Interpolator</code> being the juicy parts.</p>

<p><code>Animation</code> class is responsible for a single animation. If our animation should change e.g. position <em>and</em> transparency, we&#39;d have to use the <code>AnimationSet</code> class, since it represents a group of animations that should be played together.</p>

<p><a href="http://cogitolearning.co.uk/?p=1078" target="_blank"><code>Interpolator</code></a> defines the rate of change of an animation. We can specify, for example, how fast something is going to fade out or if the animation should be accelerating, decelerating, etc.</p>

<p><center>
  <figure>
    <img src="http://i.imgur.com/xVlimsR.png" />
    <figcaption>Rate of change for some interpolators.</figcaption>
  </figure>
</center></p>

<p>Constructing an <code>Animation</code> is simple:</p>
<div class="highlight"><pre><code class="java language-java" data-lang="java"><span class="n">Animation</span> <span class="n">fadeOut</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AlphaAnimation</span><span class="o">(</span><span class="mi">1</span><span class="n">f</span><span class="o">,</span> <span class="mi">0</span><span class="n">f</span><span class="o">);</span>
<span class="n">fadeOut</span><span class="o">.</span><span class="na">setInterpolator</span><span class="o">(</span><span class="k">new</span> <span class="n">AccelerateInterpolator</span><span class="o">());</span>
<span class="n">fadeOut</span><span class="o">.</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
</code></pre></div>
<p>Remember the simple transformations we&#39;re able to do: position, size, rotation and transparency? Android provides an implementation for each one, respectively:
<ul>
    <li>TranslateAnimation</li>
    <li>ScaleAnimation</li>
    <li>RotateAnimation</li>
    <li>AlphaAnimation</li>
</ul>
In our example, we&#39;re using <code>AlphaAnimation</code> which is used for transparency transformations. The arguments, <code>1f</code> and <code>0f</code>, simply mean we wish the opacity to go from 100% to 0% - we want the view to fade out.</p>

<p>The second line of our example sets the <code>Interpolator</code>. Again, to make things easier for us, the package includes several Interpolator subclasses specifying various speed curves. We&#39;ve randomly chosen <code>AccelerateInterpolator</code>, which tells a transformation to start slow, then speed up. By default, every Animation uses a <code>LinearInterpolator</code>.</p>

<p>Lastly, we set the duration (in milliseconds) for our animation to run.</p>

<p>Animations can be defined by either XML or code. As with layouts, XML file is recommended. Let&#39;s convert the code in our example to XML.</p>

<p>Android designates a special folder where XML files specifying animations should live: <code>res/anim</code>. We therefore create a file called <code>fade_out.xml</code>:</p>
<div class="highlight"><pre><code class="xml language-xml" data-lang="xml"><span class="err">&lt;</span>?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;&gt;
<span class="nt">&lt;alpha</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">android:interpolator=</span><span class="s">&quot;@interpolator/accelerate_quad&quot;</span> 
    <span class="na">android:fromAlpha=</span><span class="s">&quot;1.0&quot;</span>
    <span class="na">android:toAlpha=</span><span class="s">&quot;0.0&quot;</span>
    <span class="na">android:duration=</span><span class="s">&quot;1000&quot;</span><span class="nt">&gt;</span>
</code></pre></div>
<p>and put it in the <code>res/anim</code> folder. To execute it, <code>AnimationUtils</code> class provides a method that constructs the Animation:</p>
<div class="highlight"><pre><code class="java language-java" data-lang="java"><span class="n">Context</span> <span class="n">ctx</span> <span class="o">=</span> <span class="n">getContext</span><span class="o">();</span>
<span class="n">Animation</span> <span class="n">fade</span> <span class="o">=</span> <span class="n">AnimationUtils</span><span class="o">.</span><span class="na">loadAnimation</span><span class="o">(</span><span class="n">ctx</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">anim</span><span class="o">.</span><span class="na">fade_out</span><span class="o">);</span>
</code></pre></div>
<p>Suppose we wish to - besides fading out - shrink our view. Recall that in order to execute two or more Animations at the same time, we have to use <code>AnimationSet</code>. This is as simple as creating an Animation and adding it to the AnimationSet:</p>
<div class="highlight"><pre><code class="java language-java" data-lang="java"><span class="c1">// suppose fade is defined as in the code example above</span>

<span class="n">Animation</span> <span class="n">shrink</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ScaleAnimation</span><span class="o">(</span><span class="mi">1</span><span class="n">f</span><span class="o">,</span> <span class="mi">0</span><span class="n">f</span><span class="o">,</span> <span class="mi">1</span><span class="n">f</span><span class="o">,</span> <span class="mi">0</span><span class="n">f</span><span class="o">);</span>
<span class="n">shrink</span><span class="o">.</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">AnimationSet</span> <span class="n">set</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnimationSet</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
<span class="n">set</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">fade</span><span class="o">);</span>
<span class="n">set</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">shrink</span><span class="o">);</span>

<span class="c1">// suppose view variable exist, and points to a View instance</span>
<span class="n">view</span><span class="o">.</span><span class="na">startAnimation</span><span class="o">(</span><span class="n">set</span><span class="o">);</span>
</code></pre></div>
<p>If you wish to execute animations in the set one by one, you can do that by specifying the <em>start offset</em>; <code>fade</code> is set to run 1000 milliseconds. If we want <code>shrink</code> to be executed after <code>fade</code>, it needs to wait 1000 millis before executing:</p>
<div class="highlight"><pre><code class="java language-java" data-lang="java"><span class="n">shrink</span><span class="o">.</span><span class="na">setStartOffset</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
</code></pre></div>
<p>Converting everything to XML yields:</p>
<div class="highlight"><pre><code class="xml language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;set</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;alpha</span>
    <span class="na">android:fromAlpha=</span><span class="s">&quot;1.0&quot;</span>
    <span class="na">android:toAlpha=</span><span class="s">&quot;0.0&quot;</span>
    <span class="na">android:interpolator=</span><span class="s">&quot;@android:interpolator/accelerate_quad&quot;</span>
    <span class="na">android:duration=</span><span class="s">&quot;1000&quot;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;scale</span>
    <span class="na">android:fromXScale=</span><span class="s">&quot;1.0&quot;</span>
    <span class="na">android:toXScale=</span><span class="s">&quot;0.0&quot;</span>
    <span class="na">android:fromYScale=</span><span class="s">&quot;1.0&quot;</span>
    <span class="na">android:toYScale=</span><span class="s">&quot;0.0&quot;</span>
    <span class="na">android:duration=</span><span class="s">&quot;1000&quot;</span>
    <span class="na">android:startOffset=</span><span class="s">&quot;1000&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/set&gt;</span>
</code></pre></div>
<p>To conclude this rudimentary introduction to view animation, another interface is worth mentioning: <code>AnimationListener</code>. Suppose we wish to hide our view after an animation completes. This can be easily achieved using <code>AnimationListener</code>:</p>
<div class="highlight"><pre><code class="java language-java" data-lang="java"><span class="n">Animation</span> <span class="n">fadeOut</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AlphaAnimation</span><span class="o">(</span><span class="mi">1</span><span class="n">f</span><span class="o">,</span> <span class="mi">0</span><span class="n">f</span><span class="o">);</span>
<span class="n">fadeOut</span><span class="o">.</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>

<span class="n">fadeOut</span><span class="o">.</span><span class="na">setAnimationListener</span><span class="o">(</span><span class="k">new</span> <span class="n">Animation</span><span class="o">.</span><span class="na">AnimationListener</span><span class="o">()</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onAnimationStart</span><span class="o">(</span><span class="n">Animation</span> <span class="n">animation</span><span class="o">)</span> <span class="o">{}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onAnimationRepeat</span><span class="o">(</span><span class="n">Animation</span> <span class="n">animation</span><span class="o">)</span> <span class="o">{}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onAnimationEnd</span><span class="o">(</span><span class="n">Animation</span> <span class="n">animation</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">view</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">INVISIBLE</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">});</span>

<span class="n">view</span><span class="o">.</span><span class="na">startAnimation</span><span class="o">(</span><span class="n">fadeOut</span><span class="o">);</span>
</code></pre></div>
<p>If you wish to spice things up by browsing through some actual code, I&#39;ve created a simple app showing random View animations. You can find it <a href="https://github.com/tslamic/AndroidExamples/tree/master/SimpleAnimationsExample">here</a>.</p>

</div>

<p class="message">
Your feedback is very important to me. If you enjoyed (or hated) this post, please let me know! 
Leave a comment below, share it with your friends or subscribe to the <a href="/atom.xml">RSS feed</a>. 
<br /><br />
Thanks for reading!
</p>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
          <a href="/2013/11/17/leaving-london/">
            Leaving London
            <small>17 Nov 2013</small>
          </a>
      </li>
    
      <li>
          <a href="/2013/10/12/can-you-center-a-button/">
            To Center A Button
            <small>12 Oct 2013</small>
          </a>
      </li>
    
      <li>
          <a href="/2013/07/21/twos-complement-and-absolute-values/">
            Two's Complement And Absolute Values
            <small>21 Jul 2013</small>
          </a>
      </li>
    
  </ul>
</div>


  <div class="comments">
 <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'tslamic'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
  </body>
</html>
